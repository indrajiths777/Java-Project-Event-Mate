package projk;

import javax.swing.*;
import java.awt.*;
import java.net.URL;
import java.awt.event.*;
import java.net.URI;
import java.awt.Desktop;

public class ProjK extends JFrame {

    private JTextField collegeSearchBox;
    private JTextField eventSearchBox;

    public ProjK() {
        setTitle("Event Mate");
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setExtendedState(JFrame.MAXIMIZED_BOTH);
        setLayout(null);
        setResizable(true);
        getContentPane().setBackground(new Color(20, 20, 20));

        JLabel titleLabel = new JLabel("Event Mate", SwingConstants.CENTER);
        titleLabel.setFont(new Font("Courier New", Font.BOLD, 42));
        titleLabel.setForeground(new Color(0, 255, 180));
        titleLabel.setBounds(0, 20, 850, 50);

        JLabel collegeLabel = new JLabel("College Name:");
        collegeLabel.setFont(new Font("Courier New", Font.PLAIN, 22));
        collegeLabel.setForeground(new Color(0, 255, 255));
        collegeLabel.setBounds(100, 100, 180, 30);

        collegeSearchBox = new JTextField(20);
        JPanel collegePanel = createClearableField(collegeSearchBox);
        collegePanel.setBounds(320, 100, 350, 35);

        JLabel eventLabel = new JLabel("Event Name:");
        eventLabel.setFont(new Font("Courier New", Font.PLAIN, 22));
        eventLabel.setForeground(new Color(0, 255, 255));
        eventLabel.setBounds(100, 160, 180, 30);

        eventSearchBox = new JTextField(20);
        JPanel eventPanel = createClearableField(eventSearchBox);
        eventPanel.setBounds(320, 160, 350, 35);

        JButton clickButton = new JButton("Click Here");
        clickButton.setFont(new Font("Courier New", Font.BOLD, 20));
        clickButton.setBackground(Color.BLACK);
        clickButton.setForeground(Color.GREEN);
        clickButton.setBorder(BorderFactory.createLineBorder(Color.GREEN, 2));
        clickButton.setBounds(320, 230, 200, 45);
        clickButton.setCursor(new Cursor(Cursor.HAND_CURSOR));
        clickButton.setFocusPainted(false);

        JButton backButton = new JButton("Back");
        backButton.setFont(new Font("Courier New", Font.BOLD, 20));
        backButton.setBackground(Color.BLACK);
        backButton.setForeground(Color.RED);
        backButton.setBorder(BorderFactory.createLineBorder(Color.RED, 2));
        backButton.setBounds(20, 20, 120, 40);
        backButton.setCursor(new Cursor(Cursor.HAND_CURSOR));
        backButton.setFocusPainted(false);
        backButton.addActionListener(e -> dispose());

        add(titleLabel);
        add(collegeLabel);
        add(collegePanel);
        add(eventLabel);
        add(eventPanel);
        add(clickButton);
        add(backButton);

        clickButton.addActionListener(e -> onClick());
    }

    private void onClick() {
        String collegeName = collegeSearchBox.getText().trim();
        String eventName = eventSearchBox.getText().trim();

        if (collegeName.equalsIgnoreCase("cep") && eventName.equalsIgnoreCase("hackathon")) {
            showHackathonImage();
        } else {
            JOptionPane.showMessageDialog(this, "Sorry!!\nNo such events are currently available on this college.");
        }
    }

    private void showHackathonImage() {
        URL imgURL = getClass().getResource("/hack/hackathon.png");
        if (imgURL == null) {
            JOptionPane.showMessageDialog(this, "hackathon.png image not found.");
            return;
        }

        ImageIcon originalIcon = new ImageIcon(imgURL);
        Image scaledImage = originalIcon.getImage().getScaledInstance(600, 400, Image.SCALE_SMOOTH);
        ImageIcon scaledIcon = new ImageIcon(scaledImage);

        JFrame imageFrame = new JFrame("Hackathon Event");
        imageFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        imageFrame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        imageFrame.setLocationRelativeTo(this);
        imageFrame.setResizable(true);
        imageFrame.getContentPane().setBackground(new Color(20, 20, 20));

        JLabel imageLabel = new JLabel(scaledIcon);
        imageLabel.setHorizontalAlignment(SwingConstants.CENTER);
        imageLabel.setAlignmentX(Component.CENTER_ALIGNMENT);

        JTextArea detailsArea = new JTextArea(
            "Event: Hackathon\n" +
            "College: CEP\n" +
            "Date: 2025-10-15\n" +
            "Venue: Main Auditorium\n\n" +
            "Join us for an exciting 24-hour coding competition!\n" +
            "Prizes for top teams and networking opportunities."
        );
        detailsArea.setEditable(false);
        detailsArea.setLineWrap(true);
        detailsArea.setWrapStyleWord(true);
        detailsArea.setFont(new Font("Courier New", Font.PLAIN, 18));
        detailsArea.setForeground(new Color(255, 105, 180));
        detailsArea.setBackground(new Color(30, 30, 30));
        detailsArea.setAlignmentX(Component.CENTER_ALIGNMENT);
        detailsArea.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(Color.PINK), "Event Details"));

        JButton registerButton = new JButton("<HTML><U>Register for Hackathon</U></HTML>");
        registerButton.setFont(new Font("Courier New", Font.BOLD, 22));
        registerButton.setForeground(Color.CYAN);
        registerButton.setBackground(Color.BLACK);
        registerButton.setBorderPainted(false);
        registerButton.setContentAreaFilled(false);
        registerButton.setCursor(new Cursor(Cursor.HAND_CURSOR));
        registerButton.setAlignmentX(Component.CENTER_ALIGNMENT);

        registerButton.addActionListener(e -> {
            JOptionPane.showMessageDialog(imageFrame, "Registration link clicked! Redirecting...");
            try {
                Desktop.getDesktop().browse(new URI("https://www.google.com"));
            } catch (Exception ex) {
                ex.printStackTrace();
                JOptionPane.showMessageDialog(imageFrame, "Failed to open registration link.");
            }
        });

        JButton backButton = new JButton("Back");
        backButton.setFont(new Font("Courier New", Font.BOLD, 20));
        backButton.setForeground(Color.RED);
        backButton.setBackground(Color.BLACK);
        backButton.setBorder(BorderFactory.createLineBorder(Color.RED, 2));
        backButton.setCursor(new Cursor(Cursor.HAND_CURSOR));
        backButton.setFocusPainted(false);
        backButton.setAlignmentX(Component.CENTER_ALIGNMENT);
        backButton.addActionListener(e -> imageFrame.dispose());

        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        panel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
        panel.setBackground(new Color(20, 20, 20));

        panel.add(imageLabel);
        panel.add(Box.createRigidArea(new Dimension(0, 20)));
        panel.add(detailsArea);
        panel.add(Box.createRigidArea(new Dimension(0, 20)));
        panel.add(registerButton);
        panel.add(Box.createRigidArea(new Dimension(0, 30)));
        panel.add(backButton);

        imageFrame.add(panel);
        imageFrame.setVisible(true);
    }

    private JPanel createClearableField(JTextField textField) {
        JPanel panel = new JPanel(new BorderLayout());
        panel.setBackground(new Color(30, 30, 30));
        textField.setFont(new Font("Courier New", Font.PLAIN, 16));
        textField.setBackground(Color.BLACK);
        textField.setForeground(Color.GREEN);
        textField.setCaretColor(Color.GREEN);
        panel.add(textField, BorderLayout.CENTER);

        JButton clearButton = new JButton("Ã—");
        clearButton.setMargin(new Insets(1, 10, 1, 10));
        clearButton.setFocusable(false);
        clearButton.setFont(new Font("Courier New", Font.BOLD, 16));
        clearButton.setForeground(Color.RED);
        clearButton.setBackground(Color.BLACK);
        clearButton.setBorder(BorderFactory.createLineBorder(Color.RED, 1));
        clearButton.setCursor(new Cursor(Cursor.HAND_CURSOR));
        clearButton.setToolTipText("Clear");

        clearButton.addActionListener(e -> textField.setText(""));

        panel.add(clearButton, BorderLayout.EAST);
        return panel;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            ProjK frame = new ProjK();
            frame.setVisible(true);
        });
    }
}
